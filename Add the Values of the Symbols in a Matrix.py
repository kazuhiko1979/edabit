"""
Write a function that takes a list of lists and returns the value of all of the symbols in it, where each symbol adds or takes something from the total score. Symbol values:

# = 5
O = 3
X = 1
! = -1
!! = -3
!!! = -5
A list of lists containing 2 #s, a O, and a !!! would equal (0 + 5 + 5 + 3 - 5) 8.

If the final score is negative, return 0 (e.g. 3 #s, 3 !!s, 2 !!!s and a X would be (0 + 5 + 5 + 5 - 3 - 3 - 3 - 5 - 5 + 1) -3, so return 0.

Examples
check_score([
  ["#", "!"],
  ["!!", "X"]
]) ➞ 2

check_score([
  ["!!!", "O", "!"],
  ["X", "#", "!!!"],
  ["!!", "X", "O"]
]) ➞ 0

check_score([
  ["#", "O", "#", "!!", "X", "!!", "#", "O", "O", "!!", "#", "X", "#", "O"],
  ["!!!", "!!!", "!!", "!!", "!", "!", "X", "!", "!!!", "O", "!", "!!!", "X", "#"],
  ["#", "X", "#", "!!!", "!", "!!", "#", "#", "!!", "X", "!!", "!!!", "X", "O"],
  ["!!", "X", "!!", "!!", "!!!", "#", "O", "O", "!!!", "#", "O", "O", "#", "!!"],
  ["O", "X", "#", "!", "!", "X", "!!!", "O", "!!!", "!!", "O", "!", "O", "X"],
  ["!!", "!!!", "X", "!!!", "!!", "!!", "!!!", "X", "O", "!", "#", "!!", "!!", "!!!"],
  ["!!", "!!", "#", "O", "!", "!!", "!", "!!!", "#", "O", "#", "!", "#", "!!"],
  ["X", "X", "O", "X", "!!!", "#", "!!!", "!!!", "X", "X", "X", "!", "#", "!!"],
  ["O", "!!!", "!", "O", "#", "!", "!", "#", "X", "X", "#", "O", "!!", "!"],
  ["X", "!", "!!", "#", "#", "X", "!!", "O", "!!", "X", "X", "!!", "#", "X"],
  ["!", "!!", "!!", "O", "!!", "!!", "#", "#", "!", "!!!", "O", "!", "#", "#"],
  ["!", "!!!", "!!", "X", "!!", "!!", "#", "!!!", "O", "!!", "!!!", "!", "!", "!"],
  ["!!!", "!!!", "!!", "O", "!", "!", "!!!", "!!!", "!!", "!!", "X", "!", "#", "#"],
  ["O", "O", "#", "O", "#", "!", "!!!", "X", "X", "O", "!", "!!!", "X", "O"]
]) ➞ 12
"""
import itertools


def check_score(s):

    res = {'!!!': -5, '!!': -3, '!': -1, 'X': 1, 'O': 3, '#': 5}
    s_list = list(itertools.chain.from_iterable(s))
    num = sum([res.get(i) for i in s_list for j in res.keys() if i == j])

    if num < 0:
        return 0
    return num


    # keys = ['!!!', '!!', '!', 'X', 'O', '#']
    # values = [-5, -3, -1, 1, 3, 5]
    # res = {}
    #
    # for key in keys:
    #     for value in values:
    #         res[key] = value
    #         values.remove(value)
    #         break
    # print(res)

    # res = {'!!!': -5, '!!': -3, '!': -1, 'X': 1, 'O': 3, '#': 5}
    # s_list = list(itertools.chain.from_iterable(s))
    # return sum([res.get(i) for i in s_list for j in res.keys() if i == j])

    # print(res.get('!!!'))
    # print(res.keys())
    # print(res.values())
    # print(s_list)
    # print(list(res.keys()))

    # return sum([res.get(i) for i in s_list for j in res.keys() if i == j])

    # l = []
    # for i in s_list:
    #     for j in res.keys():
    #         if i == j:
    #             l.append(res.get(i))
    # return sum(l)


print(check_score([["#", "!"],["!!", "X"]]))
print(check_score([
  ["!!!", "O", "!"],
  ["X", "#", "!!!"],
  ["!!", "X", "O"]
]))
print(check_score([
  ["#", "O", "#", "!!", "X", "!!", "#", "O", "O", "!!", "#", "X", "#", "O"],
  ["!!!", "!!!", "!!", "!!", "!", "!", "X", "!", "!!!", "O", "!", "!!!", "X", "#"],
  ["#", "X", "#", "!!!", "!", "!!", "#", "#", "!!", "X", "!!", "!!!", "X", "O"],
  ["!!", "X", "!!", "!!", "!!!", "#", "O", "O", "!!!", "#", "O", "O", "#", "!!"],
  ["O", "X", "#", "!", "!", "X", "!!!", "O", "!!!", "!!", "O", "!", "O", "X"],
  ["!!", "!!!", "X", "!!!", "!!", "!!", "!!!", "X", "O", "!", "#", "!!", "!!", "!!!"],
  ["!!", "!!", "#", "O", "!", "!!", "!", "!!!", "#", "O", "#", "!", "#", "!!"],
  ["X", "X", "O", "X", "!!!", "#", "!!!", "!!!", "X", "X", "X", "!", "#", "!!"],
  ["O", "!!!", "!", "O", "#", "!", "!", "#", "X", "X", "#", "O", "!!", "!"],
  ["X", "!", "!!", "#", "#", "X", "!!", "O", "!!", "X", "X", "!!", "#", "X"],
  ["!", "!!", "!!", "O", "!!", "!!", "#", "#", "!", "!!!", "O", "!", "#", "#"],
  ["!", "!!!", "!!", "X", "!!", "!!", "#", "!!!", "O", "!!", "!!!", "!", "!", "!"],
  ["!!!", "!!!", "!!", "O", "!", "!", "!!!", "!!!", "!!", "!!", "X", "!", "#", "#"],
  ["O", "O", "#", "O", "#", "!", "!!!", "X", "X", "O", "!", "!!!", "X", "O"]
]))

print(check_score([['#', '!', 'O', '!!', '#', '!!', '!!', 'X', '!', 'X', '!!!', '!!!', 'X', '#'], ['!', '#', '!!', '!!!', 'X', 'X', '#', '!!', 'O', '!!!', '!', '!!!', '#', 'O'], ['O', 'X', '!!!', '#', '!!!', '!', '!', '!', '#', '!!', '!!!', 'X', '!', 'X'], ['#', '!!', '!!', '#', 'O', '!', 'X', 'X', '!!!', '#', '#', '!!!', '#', '!'], ['#', 'O', 'X', 'X', '!!', '#', 'O', 'X', '#', '!', '!', '!', 'O', '#'], ['X', '!', 'X', 'O', '!', '!', '!!', '!!', '!!', '!!', '!!!', '!!!', '!', 'X'], ['!!!', '!', '!!', 'O', '!!!', 'X', '#', '#', 'X', 'X', '!', '!', 'X', '!'], ['!!!', 'O', '!!!', '!!!', 'O', '#', '!!', '!!!', '!', '!!!', 'O', 'O', 'X', '!!!'], ['!!', 'X', 'O', '!!!', '!!', 'O', '#', 'X', 'O', 'X', '!!', 'X', '#', '!'], ['X', '#', '!!!', '!!!', '!!', '#', '!', '!!', 'O', '!', 'O', '#', '!!!', '#'], ['!', '#', '!', '!!!', '!!!', 'X', '!', 'X', '#', '!!', '!', '!!', 'X', '!!!'], ['!!!', '#', '#', '!!', 'O', '!!', '#', '!!!', '#', '#', '!!', '#', '!', 'O'], ['!!!', 'X', 'O', '!!', 'X', '!', 'O', 'X', 'O', '!!!', '#', '#', '#', '#'], ['X', 'X', '!!!', '!!', 'O', '#', 'O', '#', 'X', 'X', 'X', '!!!', '!', '!!!']])
)